# SENP_AI - Context-Aware Version

**Version 1120_02** (2025年11月20日)

会話の文脈を理解し、自然な対話が可能なAIアシスタント。

---

## 🌟 Version 1120_02 の特徴

### ✨ 新機能

#### 1. **会話の文脈を理解**
- すべての質問・回答を記憶
- 前の会話を踏まえた回答
- 「それ」「あれ」などの指示語が通じる

#### 2. **マルチターン対話**
```
👤: このボタンは何ですか？
🤖: これは保存ボタンです。

👤: それを押すとどうなりますか？
🤖: 保存ボタンを押すと...（前の回答を踏まえて説明）

👤: じゃあ、その前にこっちは？
🤖: 先ほどの保存の前に...（文脈を理解）
```

#### 3. **複数スクリーンショット対応**
- 複数の画面を撮影して比較
- 「最初の画面」「さっきの画面」などを参照
- スクリーンショット番号を自動管理

#### 4. **会話リセット機能**
- 新しいトピックを始めるときにリセット
- 「🔄 会話をリセット」ボタン
- 画面表示はそのまま残る

#### 5. **会話状況の可視化**
- 💬 会話件数の表示
- 📸 スクリーンショット枚数の表示
- リアルタイムで更新

---

## 🚀 使い方

### 起動方法

```bash
python run_context.py
```

### 基本的な使い方

#### 1. **シンプルな質問**
```
1. 📸 スクリーンショット撮影
2. 質問: 「この画面は何ですか？」
3. AI回答
```

#### 2. **連続した質問（文脈理解）**
```
1. 📸 スクリーンショット撮影
2. 質問: 「このボタンは何ですか？」
3. AI回答: 「これは保存ボタンです...」

4. 質問: 「それを押すとどうなりますか？」
   （スクリーンショット不要！）
5. AI回答: 「保存ボタンを押すと...」
   （前の回答を踏まえて説明）
```

#### 3. **複数画面の比較**
```
1. 📸 スクリーンショット1撮影
2. 質問: 「この設定画面について教えてください」
3. AI回答

4. 📸 スクリーンショット2撮影
5. 質問: 「こっちの画面と何が違いますか？」
6. AI回答: 「最初の画面と比較すると...」
```

#### 4. **会話のリセット**
```
1. 長い会話の後...
2. 🔄 会話をリセット ボタンをクリック
3. 新しいトピックで質問開始
```

---

## 🎨 UI構成

```
┌──────────────────────────────────────────────────────────────┐
│ [📸] [🔄] [🔊] [🤖 GPT-5.1 Instant ⚡ ▼]                   │
│                           💬 会話: 4件 (📸 2枚)  準備完了   │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  [12:34] あなた: このボタンは何ですか？                      │
│  [12:35] SENP_AI: これは保存ボタンです...                    │
│          (使用モデル: gpt-5.1-instant)                       │
│                                                              │
│  [12:36] あなた: それを押すとどうなりますか？                │
│  [12:37] SENP_AI: 保存ボタンを押すと...                      │
│          (使用モデル: gpt-5.1-instant)                       │
│                                                              │
│  --- 会話履歴がリセットされました ---                        │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│ [質問を入力してください（Returnキーで送信）]          [🎤] │
└──────────────────────────────────────────────────────────────┘
```

---

## 💡 使用例

### 例1: アプリの操作方法を段階的に学ぶ

```
👤: [スクリーンショット] この画面で何ができますか？
🤖: この画面では、ファイルの編集、保存、印刷ができます...

👤: 保存はどうやってやるんですか？
🤖: 保存するには、先ほどお見せした画面の左上にある...

👤: ショートカットキーはありますか？
🤖: はい、保存のショートカットキーは Ctrl+S です...

👤: じゃあ、印刷は？
🤖: 印刷は、最初にお見せいただいた画面の...
```

### 例2: エラー解決の相談

```
👤: [エラー画面] このエラーが出ました
🤖: これは〇〇のエラーです。原因は...

👤: どうすれば直りますか？
🤖: このエラーを解決するには、以下の手順を...

👤: 1番目の手順がわかりません
🤖: 先ほどお伝えした1番目の手順について詳しく...

👤: [設定画面] ここですか？
🤖: はい、その画面で正しいです。先ほどのエラーを...
```

### 例3: 複数の選択肢を比較

```
👤: [画面A] この商品について教えてください
🤖: この商品は...価格は〇〇円です

👤: [画面B] こっちの商品はどうですか？
🤖: こちらの商品は...最初の商品と比べると...

👤: どっちがおすすめですか？
🤖: 最初にお見せいただいた商品Aと、2番目の商品Bを比較すると...
```

---

## 🆚 Version 1120_01 との比較

| 機能 | v1120_01 | v1120_02 (Context-Aware) |
|------|----------|--------------------------|
| 会話履歴保持 | ❌ | ✅ |
| 文脈理解 | ❌ | ✅ |
| 指示語対応 | ❌ | ✅ |
| 複数画面参照 | ❌ | ✅ |
| 会話リセット | ❌ | ✅ |
| 会話状況表示 | ❌ | ✅ |
| モデル選択 | ✅ | ✅ |
| 音声入出力 | ✅ | ✅ |
| Returnキー送信 | ✅ | ✅ |

---

## 🎯 どちらを使うべき？

### Version 1120_01（シンプル版）を推奨
- 単発の質問が多い
- 毎回新しいトピック
- シンプルな操作が好き

### Version 1120_02（コンテキスト版）を推奨 ⭐
- 連続した質問をしたい
- 「それ」「あれ」を使いたい
- 複数の画面を比較したい
- より自然な会話がしたい

---

## 📦 必要なパッケージ

Version 1120_01と同じ:
```
openai>=1.0.0
pillow>=10.0.0
pyaudio>=0.2.13
SpeechRecognition>=3.10.0
pygame>=2.5.0
```

---

## 📁 ファイル構成

```
SENP_AI/
├── run_context.py            # メイン実行ファイル（Context版）⭐
├── controller_1120_02.py     # コンテキスト管理コントローラー
├── ui_1120_02.py            # 会話リセット機能付きUI
├── ai_1120_02.py            # コンテキスト対応AIモジュール
├── tts_1120_01.py           # 音声出力モジュール
├── speech_1120_01.py        # 音声入力モジュール
├── requirements.txt         # 依存パッケージ
└── README_CONTEXT_v1120_02.md  # このファイル
```

---

## 🔧 トラブルシューティング

### Q: 会話が長くなりすぎて遅くなった
**A:** 「🔄 会話をリセット」ボタンで履歴をクリアしてください

### Q: 前の画面を参照してくれない
**A:** 「最初の画面」「さっきの画面」など、明示的に指定してください

### Q: 指示語が通じない
**A:** 直前の会話で言及したものを指す場合は通じます。離れた会話の場合は明示的に指定してください

---

## 🔗 リンク

- **GitHubリポジトリ**: https://github.com/osusoworks/pc_assistant_app
- **OpenAI API**: https://platform.openai.com/

---

## 📝 更新履歴

### Version 1120_02 (2025-11-20) - Context-Aware
- ✨ 会話履歴の保持機能
- ✨ 文脈を理解した回答
- ✨ 指示語（それ、あれ）対応
- ✨ 複数スクリーンショット参照
- ✨ 会話リセット機能
- ✨ 会話状況の可視化

### Version 1120_01 (2025-11-20)
- ✨ GPT-5.1シリーズ対応
- ✨ UIでモデル選択機能
- ✨ ファイル命名規則統一

---

**SENP_AI v1120_02** - 文脈を理解する、より自然なAIアシスタント 🤖💬✨

